import{h as G}from"./BLMuvzoS.js";import{b as a,I as me,g as Ve,s as Be,r as y,j as K,v as X,x as Ee,y as He,c as x,a as i,w as l,d as n,l as _,q as m,k as b,o as d,t as g,Q as Y,C as je,n as E,z as Z,A as O,F as ee,m as Fe,P as qe,p as te,B as pe,_ as We}from"#entry";import{s as Je,G as Qe}from"./Clr2e_nE.js";import{D as Ge}from"./CoiHVIeb.js";import{U as Ke}from"./BnoVSOQD.js";import{C as Xe}from"./DdFW8pdL.js";import{T as Ye}from"./1nlWnoXy.js";var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"};function ve(w){for(var v=1;v<arguments.length;v++){var f=arguments[v]!=null?Object(arguments[v]):{},k=Object.keys(f);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(f).filter(function(C){return Object.getOwnPropertyDescriptor(f,C).enumerable}))),k.forEach(function(C){et(w,C,f[C])})}return w}function et(w,v,f){return v in w?Object.defineProperty(w,v,{value:f,enumerable:!0,configurable:!0,writable:!0}):w[v]=f,w}var ae=function(v,f){var k=ve({},v,f.attrs);return a(me,ve({},k,{icon:Ze}),null)};ae.displayName="DashboardOutlined";ae.inheritAttrs=!1;var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};function fe(w){for(var v=1;v<arguments.length;v++){var f=arguments[v]!=null?Object(arguments[v]):{},k=Object.keys(f);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(f).filter(function(C){return Object.getOwnPropertyDescriptor(f,C).enumerable}))),k.forEach(function(C){at(w,C,f[C])})}return w}function at(w,v,f){return v in w?Object.defineProperty(w,v,{value:f,enumerable:!0,configurable:!0,writable:!0}):w[v]=f,w}var le=function(v,f){var k=fe({},v,f.attrs);return a(me,fe({},k,{icon:tt}),null)};le.displayName="LinkOutlined";le.inheritAttrs=!1;const lt={class:"proxy-page fade-in"},st={class:"stat-card enhanced-card gradient-bg-blue slide-in-up",style:{"animation-delay":"0s"}},ot={class:"stat-icon"},nt={class:"stat-content"},rt={class:"stat-main"},it={class:"stat-value"},ut={class:"stat-card enhanced-card gradient-bg-green slide-in-up",style:{"animation-delay":"0.1s"}},dt={class:"stat-icon"},ct={class:"stat-content"},pt={class:"stat-main"},vt={class:"stat-value"},ft={key:0,class:"stat-badge"},mt={class:"stat-card enhanced-card gradient-bg-orange slide-in-up",style:{"animation-delay":"0.2s"}},yt={class:"stat-icon"},_t={class:"stat-content"},gt={class:"stat-main"},wt={class:"stat-value"},ht={class:"stat-card enhanced-card control-card slide-in-up",style:{"animation-delay":"0.3s"}},bt={class:"control-content"},kt={class:"control-item"},xt={class:"control-item"},Ct={class:"control-item",style:{"font-size":"11px"}},Ot={class:"control-time"},$t={class:"table-container enhanced-card scale-in"},It={class:"table-header"},St={class:"table-title"},zt={class:"search-filters-container"},Lt={key:2,class:"ip-code"},Ut={key:4,class:"country-info"},Pt={class:"country-flag"},Rt={class:"country-name"},Tt={class:"address-text"},Nt={key:0,class:"auth-code"},Mt={key:1,class:"unknown-text"},At={key:0,class:"auth-code"},Dt={key:1,class:"unknown-text"},Vt={key:10,class:"time-text"},Bt={key:11,class:"time-text"},Et={key:0},Ht=Ve({__name:"index",setup(w){const{$http:v}=Be(),f=y([]),k=y(0),C=y(0),se=y(0),H=y(!0),oe=y(""),ne=y(!1),U=y(""),P=y(""),R=y(""),T=y(""),N=y(""),M=y(""),A=y(""),j=y(10),re=y([]),F=y(!1),J=y(!1),r=y({fetcher_name:"手动添加",protocol:"",ip:"",port:null,username:"",password:"",country:"",address:""}),S=y({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100"],showTotal:t=>`共 ${t} 条`,size:"small",onChange:(t,e)=>{S.value.current=t,S.value.pageSize=e},onShowSizeChange:(t,e)=>{S.value.current=1,S.value.pageSize=e}});let I=null;const ye=t=>{if(!t&&t!==0)return"-";const e=Math.floor(t/86400),o=Math.floor(t%86400/3600),c=Math.floor(t%3600/60),z=t%60;return e>0?`${e}天${o}时`:o>0?`${o}时${c}分`:c>0?`${c}分${z}秒`:`${z}秒`},_e=t=>({http:"blue",https:"green",socks4:"orange",socks5:"purple"})[t]||"default",ge=t=>t<1e3?"success":t<2e3?"processing":t<4e3?"warning":"error",we=K(()=>{let t=f.value;if(U.value&&(t=t.filter(e=>e.protocol.toLowerCase()===U.value.toLowerCase())),P.value){const e=P.value.toLowerCase();t=t.filter(o=>o.ip.toLowerCase().includes(e))}if(R.value){const e=R.value;t=t.filter(o=>o.port.toString().includes(e))}if(T.value){const e=T.value.toLowerCase();t=t.filter(o=>o.fetcher_name.toLowerCase().includes(e))}if(N.value&&(t=t.filter(e=>e.country===N.value)),M.value){const e=M.value.trim();if(e.startsWith("<")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(c=>c.latency<o))}else if(e.startsWith(">")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(c=>c.latency>o))}else{const o=parseInt(e);isNaN(o)||(t=t.filter(c=>c.latency<=o))}}if(A.value){const e=A.value.trim();if(e.startsWith(">")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(c=>c.alive_time>o))}else if(e.startsWith("<")){const o=parseInt(e.substring(1));isNaN(o)||(t=t.filter(c=>c.alive_time<o))}else{const o=parseInt(e);isNaN(o)||(t=t.filter(c=>c.alive_time>=o))}}return S.value.total=t.length,t}),he=t=>({中国:"🇨🇳",美国:"🇺🇸",日本:"🇯🇵",韩国:"🇰🇷",新加坡:"🇸🇬",香港:"🇭🇰",台湾:"🇹🇼",德国:"🇩🇪",英国:"🇬🇧",法国:"🇫🇷",加拿大:"🇨🇦",澳大利亚:"🇦🇺",俄罗斯:"🇷🇺",印度:"🇮🇳",巴西:"🇧🇷",本地:"🏠",未知:"🌍"})[t]||"🌍",be=(t,e)=>e.value.toLowerCase().includes(t.toLowerCase()),ke=(t,e)=>e.value.toLowerCase().includes(t.toLowerCase()),ie=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{const o=document.createElement("textarea");o.value=t,o.style.position="fixed",o.style.opacity="0",document.body.appendChild(o),o.select();try{return document.execCommand("copy"),document.body.removeChild(o),!0}catch{return document.body.removeChild(o),!1}}},xe=async t=>{let e="";t.username&&t.password?e=`${t.protocol}://${t.username}:${t.password}@${t.ip}:${t.port}`:e=`${t.protocol}://${t.ip}:${t.port}`,await ie(e)?m.success("代理地址已复制到剪贴板"):m.error("复制失败，请手动复制")},Ce=async t=>{let e="";const c=`${t.country||"未知"}_${t.ip}`,z=encodeURIComponent(c);if(t.username&&t.password){const h=`${t.username}:${t.password}`;e=`socks://${btoa(h)}@${t.ip}:${t.port}#${z}`}else e=`socks://${t.ip}:${t.port}#${z}`;await ie(e)?m.success("V2Ray节点已复制到剪贴板"):m.error("复制失败，请手动复制")},ue=K(()=>!!(U.value||P.value||R.value||T.value||N.value||M.value||A.value)),Oe=K(()=>{let t=0;return U.value&&t++,P.value&&t++,R.value&&t++,T.value&&t++,N.value&&t++,M.value&&t++,A.value&&t++,t}),$e=()=>{U.value="",P.value="",R.value="",T.value="",N.value="",M.value="",A.value="",S.value.current=1},Ie=()=>{F.value=!0},de=()=>{F.value=!1,r.value={fetcher_name:"手动添加",protocol:"",ip:"",port:null,username:"",password:"",country:"",address:""}},Se=async()=>{try{const e=JSON.parse(localStorage.getItem("user")||"{}").username||"admin",$=`${pe().public.apiBase}/clash?username=${encodeURIComponent(e)}&password=${encodeURIComponent("admin123")}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText($),m.success("Clash 订阅链接已复制到剪贴板！");else{const h=document.createElement("textarea");h.value=$,h.style.position="fixed",h.style.left="-999999px",document.body.appendChild(h),h.select();try{document.execCommand("copy"),m.success("Clash 订阅链接已复制到剪贴板！")}catch(u){m.error("复制失败，请手动复制："+$),console.error("复制失败:",u)}document.body.removeChild(h)}}catch(t){console.error("复制 Clash 订阅链接失败:",t),m.error("复制失败，请稍后重试")}},ze=async()=>{try{const e=JSON.parse(localStorage.getItem("user")||"{}").username||"admin",$=`${pe().public.apiBase}/v2ray?username=${encodeURIComponent(e)}&password=${encodeURIComponent("admin123")}`;if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText($),m.success("V2Ray 订阅链接已复制到剪贴板！");else{const h=document.createElement("textarea");h.value=$,h.style.position="fixed",h.style.left="-999999px",document.body.appendChild(h),h.select();try{document.execCommand("copy"),m.success("V2Ray 订阅链接已复制到剪贴板！")}catch(u){m.error("复制失败，请手动复制："+$),console.error("复制失败:",u)}document.body.removeChild(h)}}catch(t){console.error("复制 V2Ray 订阅链接失败:",t),m.error("复制失败，请稍后重试")}},Le=async()=>{if(!r.value.fetcher_name){m.error("请输入来源");return}if(!r.value.protocol){m.error("请选择协议");return}if(!r.value.ip){m.error("请输入IP地址");return}if(!r.value.port){m.error("请输入端口");return}if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(r.value.ip)){m.error("IP地址格式不正确");return}J.value=!0;try{const e={fetcher_name:r.value.fetcher_name,protocol:r.value.protocol,ip:r.value.ip,port:r.value.port};r.value.username&&(e.username=r.value.username),r.value.password&&(e.password=r.value.password),r.value.country&&(e.country=r.value.country),r.value.address&&(e.address=r.value.address),await v.post("/add_proxy",e),m.success("代理添加成功"),F.value=!1,de(),await Q()}catch(e){console.error("添加代理失败:",e),m.error(e.message||"添加代理失败")}finally{J.value=!1}},Ue=[{title:"来源",dataIndex:"fetcher_name",key:"fetcher_name",width:140},{title:"协议",dataIndex:"protocol",key:"protocol",width:80},{title:"IP地址",dataIndex:"ip",key:"ip",width:130},{title:"端口",dataIndex:"port",key:"port",width:70},{title:"国家",dataIndex:"country",key:"country",width:110},{title:"地址",dataIndex:"address",key:"address",width:180},{title:"账号",dataIndex:"username",key:"username",width:90},{title:"密码",dataIndex:"password",key:"password",width:90},{title:"延迟",dataIndex:"latency",key:"latency",width:90,sorter:(t,e)=>t.latency-e.latency},{title:"存活",dataIndex:"alive_time",key:"alive_time",width:100,sorter:(t,e)=>t.alive_time-e.alive_time},{title:"上次验证",dataIndex:"validate_date",key:"validate_date",width:120},{dataIndex:"to_validate_date",key:"to_validate_date",width:120},{title:"操作",key:"action",width:160,fixed:"right"}],Q=async()=>{ne.value=!0;try{const t=await v.get("/proxies_status",{limit:500});f.value=t.proxies,k.value=t.sum_proxies_cnt,C.value=t.validated_proxies_cnt,se.value=t.pending_proxies_cnt,oe.value=G().format("HH:mm:ss");const e=new Set;t.proxies.forEach(o=>{o.fetcher_name&&e.add(o.fetcher_name)}),re.value=Array.from(e).sort()}catch(t){t.code==="ECONNABORTED"?m.warning("请求超时，后端处理时间过长，请稍后再试"):t.code==="ERR_NETWORK"?m.error("无法连接到后端服务，请检查服务是否启动"):t.response?.status===401||m.error(t.message||"获取代理数据失败"),console.error("更新数据失败:",t)}finally{ne.value=!1}};X([U,P,R,T,N,M,A],()=>{S.value.current=1});const Pe=t=>{console.log("分页变化:",t)},q=()=>{if(I&&(clearInterval(I),I=null),H.value){const t=j.value*1e3;console.log("启动自动刷新定时器，间隔:",j.value,"秒"),I=Je(()=>{console.log("自动刷新触发"),Q()},t)}},Re=t=>{t&&(console.log("刷新间隔改变为:",t,"秒"),q())};return X(H,t=>{console.log("自动刷新开关:",t),t?q():I&&(clearInterval(I),I=null)}),X(j,t=>{console.log("检测到间隔变化:",t,"秒"),H.value&&q()}),Ee(()=>{q(),Q()}),He(()=>{I&&(clearInterval(I),I=null)}),(t,e)=>{const o=b("a-tooltip"),c=b("a-col"),z=b("a-switch"),$=b("a-input-number"),h=b("a-row"),u=b("a-select-option"),W=b("a-select"),L=b("a-input"),V=b("a-button"),B=b("a-tag"),ce=b("a-space"),D=b("a-form-item"),Te=b("a-input-password"),Ne=b("a-form"),Me=b("a-modal"),Ae=b("a-table");return d(),x("div",lt,[a(h,{gutter:[16,16],class:"stats-row"},{default:l(()=>[a(c,{xs:24,sm:12,md:6},{default:l(()=>[i("div",st,[i("div",ot,[a(_(Ge))]),i("div",nt,[i("div",rt,[e[19]||(e[19]=i("div",{class:"stat-label"},"全部代理数量",-1)),i("div",it,g(k.value.toLocaleString()),1)]),a(o,{title:"目前数据库中的代理总数，包含没有通过验证的代理"},{default:l(()=>[a(_(Y),{class:"stat-help"})]),_:1})])])]),_:1}),a(c,{xs:24,sm:12,md:6},{default:l(()=>[i("div",ut,[i("div",dt,[a(_(je))]),i("div",ct,[i("div",pt,[e[20]||(e[20]=i("div",{class:"stat-label"},"当前可用代理",-1)),i("div",vt,g(C.value.toLocaleString()),1)]),C.value>0?(d(),x("div",ft,[...e[21]||(e[21]=[i("span",{class:"status-indicator online"},null,-1),n(" 在线 ",-1)])])):E("",!0)])])]),_:1}),a(c,{xs:24,sm:12,md:6},{default:l(()=>[i("div",mt,[i("div",yt,[a(_(Z))]),i("div",_t,[i("div",gt,[e[22]||(e[22]=i("div",{class:"stat-label"},"等待验证",-1)),i("div",wt,g(se.value.toLocaleString()),1)]),a(o,null,{title:l(()=>[...e[23]||(e[23]=[n(" 表示这些代理的下次验证时间已经到了，但还没有完成验证 ",-1)])]),default:l(()=>[a(_(Y),{class:"stat-help"})]),_:1})])])]),_:1}),a(c,{xs:24,sm:12,md:6},{default:l(()=>[i("div",ht,[i("div",bt,[i("div",kt,[e[24]||(e[24]=i("span",{class:"control-label"},"自动刷新",-1)),a(z,{checked:H.value,"onUpdate:checked":e[0]||(e[0]=s=>H.value=s),size:"small"},null,8,["checked"])]),i("div",xt,[e[25]||(e[25]=i("span",{class:"control-label"},"间隔(秒)",-1)),a($,{value:j.value,"onUpdate:value":e[1]||(e[1]=s=>j.value=s),min:5,max:300,step:5,size:"small",style:{width:"80px"},onChange:Re},null,8,["value"])]),i("div",Ct,[a(_(Z),{style:{"margin-right":"4px"}}),i("span",Ot,g(oe.value),1)])])])]),_:1})]),_:1}),i("div",$t,[i("div",It,[i("h2",St,[a(_(Ke)),e[26]||(e[26]=n(" 可用代理列表 ",-1))])]),i("div",zt,[a(ce,{size:10,wrap:"",class:"filter-space"},{default:l(()=>[a(W,{value:N.value,"onUpdate:value":e[2]||(e[2]=s=>N.value=s),placeholder:"🌍 国家/地区",style:{width:"140px"},size:"small","allow-clear":"","show-search":"","filter-option":ke,class:"filter-select"},{default:l(()=>[a(u,{value:""},{default:l(()=>[...e[27]||(e[27]=[n("全部国家",-1)])]),_:1}),a(u,{value:"中国"},{default:l(()=>[...e[28]||(e[28]=[n("🇨🇳 中国",-1)])]),_:1}),a(u,{value:"美国"},{default:l(()=>[...e[29]||(e[29]=[n("🇺🇸 美国",-1)])]),_:1}),a(u,{value:"日本"},{default:l(()=>[...e[30]||(e[30]=[n("🇯🇵 日本",-1)])]),_:1}),a(u,{value:"韩国"},{default:l(()=>[...e[31]||(e[31]=[n("🇰🇷 韩国",-1)])]),_:1}),a(u,{value:"新加坡"},{default:l(()=>[...e[32]||(e[32]=[n("🇸🇬 新加坡",-1)])]),_:1}),a(u,{value:"香港"},{default:l(()=>[...e[33]||(e[33]=[n("🇭🇰 香港",-1)])]),_:1}),a(u,{value:"台湾"},{default:l(()=>[...e[34]||(e[34]=[n("🇹🇼 台湾",-1)])]),_:1}),a(u,{value:"德国"},{default:l(()=>[...e[35]||(e[35]=[n("🇩🇪 德国",-1)])]),_:1}),a(u,{value:"英国"},{default:l(()=>[...e[36]||(e[36]=[n("🇬🇧 英国",-1)])]),_:1}),a(u,{value:"法国"},{default:l(()=>[...e[37]||(e[37]=[n("🇫🇷 法国",-1)])]),_:1}),a(u,{value:"加拿大"},{default:l(()=>[...e[38]||(e[38]=[n("🇨🇦 加拿大",-1)])]),_:1}),a(u,{value:"本地"},{default:l(()=>[...e[39]||(e[39]=[n("🏠 本地",-1)])]),_:1}),a(u,{value:"未知"},{default:l(()=>[...e[40]||(e[40]=[n("🌐 未知",-1)])]),_:1})]),_:1},8,["value"]),a(W,{value:T.value,"onUpdate:value":e[3]||(e[3]=s=>T.value=s),placeholder:"📡 来源",style:{width:"150px"},size:"small","allow-clear":"","show-search":"","filter-option":be,class:"filter-select"},{default:l(()=>[a(u,{value:""},{default:l(()=>[...e[41]||(e[41]=[n("全部来源",-1)])]),_:1}),(d(!0),x(ee,null,Fe(re.value,s=>(d(),O(u,{key:s,value:s},{default:l(()=>[n(g(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),a(W,{value:U.value,"onUpdate:value":e[4]||(e[4]=s=>U.value=s),placeholder:"🔌 协议类型",style:{width:"120px"},size:"small","allow-clear":"",class:"filter-select"},{default:l(()=>[a(u,{value:""},{default:l(()=>[...e[42]||(e[42]=[n("全部协议",-1)])]),_:1}),a(u,{value:"http"},{default:l(()=>[...e[43]||(e[43]=[n("HTTP",-1)])]),_:1}),a(u,{value:"https"},{default:l(()=>[...e[44]||(e[44]=[n("HTTPS",-1)])]),_:1}),a(u,{value:"socks4"},{default:l(()=>[...e[45]||(e[45]=[n("SOCKS4",-1)])]),_:1}),a(u,{value:"socks5"},{default:l(()=>[...e[46]||(e[46]=[n("SOCKS5",-1)])]),_:1})]),_:1},8,["value"]),a(L,{value:P.value,"onUpdate:value":e[5]||(e[5]=s=>P.value=s),placeholder:"🔍 搜索 IP",style:{width:"140px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(L,{value:R.value,"onUpdate:value":e[6]||(e[6]=s=>R.value=s),placeholder:"🔢 端口",style:{width:"100px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(L,{value:M.value,"onUpdate:value":e[7]||(e[7]=s=>M.value=s),placeholder:"⚡ 延迟 如<1000",style:{width:"130px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(L,{value:A.value,"onUpdate:value":e[8]||(e[8]=s=>A.value=s),placeholder:"⏱️ 存活 如>3600",style:{width:"130px"},size:"small","allow-clear":"",class:"filter-input"},null,8,["value"]),a(V,{type:"primary",size:"small",onClick:Ie,class:"add-btn"},{default:l(()=>[a(_(qe)),e[47]||(e[47]=n(" 新增代理 ",-1))]),_:1}),a(V,{type:"default",size:"small",onClick:Se,class:"clash-btn"},{default:l(()=>[a(_(te)),e[48]||(e[48]=n(" Clash 订阅 ",-1))]),_:1}),a(V,{type:"default",size:"small",onClick:ze,class:"v2ray-btn"},{default:l(()=>[a(_(te)),e[49]||(e[49]=n(" V2Ray 订阅 ",-1))]),_:1}),ue.value?(d(),O(V,{key:0,type:"primary",size:"small",danger:"",onClick:$e,class:"clear-btn"},{default:l(()=>[a(_(Xe)),e[50]||(e[50]=n(" 清空 ",-1))]),_:1})):E("",!0),ue.value?(d(),O(B,{key:1,color:"blue",class:"active-tag"},{default:l(()=>[n(g(Oe.value)+" 个筛选 ",1)]),_:1})):E("",!0)]),_:1})]),a(Me,{open:F.value,"onUpdate:open":e[17]||(e[17]=s=>F.value=s),title:"新增代理",width:"600px",onOk:Le,onCancel:de,confirmLoading:J.value},{default:l(()=>[a(Ne,{model:r.value,"label-col":{span:6},"wrapper-col":{span:18},class:"add-proxy-form"},{default:l(()=>[a(D,{label:"来源",required:""},{default:l(()=>[a(L,{value:r.value.fetcher_name,"onUpdate:value":e[9]||(e[9]=s=>r.value.fetcher_name=s),placeholder:"请输入来源，如: 手动添加","allow-clear":""},null,8,["value"])]),_:1}),a(D,{label:"协议",required:""},{default:l(()=>[a(W,{value:r.value.protocol,"onUpdate:value":e[10]||(e[10]=s=>r.value.protocol=s),placeholder:"请选择协议","allow-clear":""},{default:l(()=>[a(u,{value:"http"},{default:l(()=>[...e[51]||(e[51]=[n("HTTP",-1)])]),_:1}),a(u,{value:"https"},{default:l(()=>[...e[52]||(e[52]=[n("HTTPS",-1)])]),_:1}),a(u,{value:"socks4"},{default:l(()=>[...e[53]||(e[53]=[n("SOCKS4",-1)])]),_:1}),a(u,{value:"socks5"},{default:l(()=>[...e[54]||(e[54]=[n("SOCKS5",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),a(D,{label:"IP地址",required:""},{default:l(()=>[a(L,{value:r.value.ip,"onUpdate:value":e[11]||(e[11]=s=>r.value.ip=s),placeholder:"请输入IP地址，如: 127.0.0.1","allow-clear":""},null,8,["value"])]),_:1}),a(D,{label:"端口",required:""},{default:l(()=>[a($,{value:r.value.port,"onUpdate:value":e[12]||(e[12]=s=>r.value.port=s),placeholder:"请输入端口",min:1,max:65535,style:{width:"100%"}},null,8,["value"])]),_:1}),a(D,{label:"账号"},{default:l(()=>[a(L,{value:r.value.username,"onUpdate:value":e[13]||(e[13]=s=>r.value.username=s),placeholder:"如需认证请输入账号","allow-clear":""},null,8,["value"])]),_:1}),a(D,{label:"密码"},{default:l(()=>[a(Te,{value:r.value.password,"onUpdate:value":e[14]||(e[14]=s=>r.value.password=s),placeholder:"如需认证请输入密码","allow-clear":""},null,8,["value"])]),_:1}),a(D,{label:"国家"},{default:l(()=>[a(L,{value:r.value.country,"onUpdate:value":e[15]||(e[15]=s=>r.value.country=s),placeholder:"请输入国家，如: 中国","allow-clear":""},null,8,["value"])]),_:1}),a(D,{label:"地址"},{default:l(()=>[a(L,{value:r.value.address,"onUpdate:value":e[16]||(e[16]=s=>r.value.address=s),placeholder:"请输入详细地址，如: 北京","allow-clear":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirmLoading"]),a(Ae,{columns:Ue,"data-source":we.value,"row-key":s=>`${s.protocol}://${s.ip}:${s.port}`,bordered:!1,loading:!1,pagination:S.value,"onUpdate:pagination":e[18]||(e[18]=s=>S.value=s),onChange:Pe,scroll:{x:1200},class:"modern-table",size:"small"},{bodyCell:l(({column:s,record:p})=>[s.key==="fetcher_name"?(d(),O(B,{key:0,color:"purple"},{default:l(()=>[a(_(Qe),{style:{"margin-right":"4px"}}),n(" "+g(p.fetcher_name),1)]),_:2},1024)):s.key==="protocol"?(d(),O(B,{key:1,color:_e(p.protocol)},{default:l(()=>[n(g(p.protocol.toUpperCase()),1)]),_:2},1032,["color"])):s.key==="ip"?(d(),x("code",Lt,g(p.ip),1)):s.key==="port"?(d(),O(B,{key:3,color:"default"},{default:l(()=>[n(g(p.port),1)]),_:2},1024)):s.key==="country"?(d(),x("div",Ut,[i("span",Pt,g(he(p.country||"未知")),1),i("span",Rt,g(p.country||"未知"),1)])):s.key==="address"?(d(),O(o,{key:5,title:p.address||"无"},{default:l(()=>[i("span",Tt,g(p.address||"-"),1)]),_:2},1032,["title"])):s.key==="username"?(d(),x(ee,{key:6},[p.username?(d(),x("code",Nt,g(p.username),1)):(d(),x("span",Mt,"未知"))],64)):s.key==="password"?(d(),x(ee,{key:7},[p.password?(d(),x("code",At,g(p.password),1)):(d(),x("span",Dt,"未知"))],64)):s.key==="latency"?(d(),O(B,{key:8,color:ge(p.latency),class:"latency-tag"},{default:l(()=>[p.latency<1e3?(d(),O(_(Ye),{key:0})):(d(),O(_(ae),{key:1})),n(" "+g(p.latency)+"ms ",1)]),_:2},1032,["color"])):s.key==="alive_time"?(d(),O(B,{key:9,color:"cyan",class:"alive-tag"},{default:l(()=>[a(_(Z)),n(" "+g(ye(p.alive_time)),1)]),_:2},1024)):s.key==="validate_date"?(d(),x("span",Vt,g(p.validate_date?_(G)(p.validate_date).format("MM-DD HH:mm:ss"):"-"),1)):s.key==="to_validate_date"?(d(),x("span",Bt,g(p.to_validate_date?_(G)(p.to_validate_date).format("MM-DD HH:mm:ss"):"-"),1)):s.key==="action"?(d(),O(ce,{key:12,size:4},{default:l(()=>[a(o,{title:"复制代理地址"},{default:l(()=>[a(V,{type:"link",size:"small",onClick:De=>xe(p),style:{padding:"0 4px"}},{default:l(()=>[a(_(te)),e[55]||(e[55]=n(" 代理 ",-1))]),_:1},8,["onClick"])]),_:2},1024),p.protocol==="socks4"||p.protocol==="socks5"?(d(),O(o,{key:0,title:"复制V2Ray节点"},{default:l(()=>[a(V,{type:"link",size:"small",onClick:De=>Ce(p),style:{padding:"0 4px"}},{default:l(()=>[a(_(le)),e[56]||(e[56]=n(" V2Ray ",-1))]),_:1},8,["onClick"])]),_:2},1024)):E("",!0)]),_:2},1024)):E("",!0)]),headerCell:l(({column:s})=>[s.key==="to_validate_date"?(d(),x("span",Et,[e[58]||(e[58]=n(" 下次验证时间 ",-1)),a(o,null,{title:l(()=>[...e[57]||(e[57]=[n(" 验证器会不断从数据库中取出满足下次验证时间在当前时间之前的代理进行验证 ",-1)])]),default:l(()=>[a(_(Y),{style:{"margin-left":"4px",opacity:"0.6"}})]),_:1})])):E("",!0)]),_:1},8,["data-source","row-key","pagination"])])])}}}),Kt=We(Ht,[["__scopeId","data-v-0094adfe"]]);export{Kt as default};
